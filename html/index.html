<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title id="title">Live Audio Stream</title>
    <!-- Material Design Lite -->
    <script src="js/material.min.js"></script>
    <link rel="stylesheet" href="css/material.min.css" />
    <!-- Material Design icon font -->
    <link rel="stylesheet" href="font/font.css" />
    <link href="css/common.css" rel="stylesheet" />
  </head>

  <body class="default">
    <div
      class="mdl-button mdl-js-button mdl-button--icon theme-button mdl-button--icon noselect"
      id="themeButton"
    >
      <i class="material-icons">palette</i>
    </div>
    <!-- Wide card with share menu button -->

    <div class="container noselect">
      <h3>Audio Stream</h3>

      <div id="not-supported" class="hidden">
        <p id="unsupported_browser">
          Unfortunately your web browser doesn't appear to support WebRTC which
          is required for this application. Please try another web browser.
        </p>
      </div>
      <div id="output" class="hidden">
        <div id="media"></div>
      </div>
      <div id="supported">
        <div id="channels" class="hidden">
          <!-- <h1 id="channels_header">Channels</h3> -->
          <p id="channels_description">
            Click on a channel name below to connect.
          </p>
          <p id="nochannels"><i>No Channels found</i></p>
          <div>
            <button class="button">
              <i class="material-icons">record_voice_over</i> Translation
            </button>
            <button class="button">
              <i class="material-icons">translate</i>Live Original
            </button>
          </div>
        </div>
      </div>
      <!-- Spinner and Play button -->
      <div
        id="spinner"
        class="mdl-progress mdl-js-progress mdl-progress__indeterminate"
      ></div>
      <div style="display: flex; justify-content: center">
        <button
          id="play"
          class="play-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect hidden"
        >
          <i class="material-icons">play_arrow</i>
        </button>
      </div>
      <div id="error" class="hidden"></div>
      <div id="footer">
        <a href="https://github.com/porjo/babelcast">
          <span class="icon-github-circled" id="github-logo"></span>
          <span id="powered_by">Powered by Babelcast</span>
        </a>
      </div>
    </div>
    <script>
      const themeButton = document.getElementById("themeButton");
      const themes = ["default", "dark", "blue", "green", "white"];

      // Load saved theme on page load
      let currentTheme = localStorage.getItem("lab_page_theme") || 0;
      document.body.className = themes[currentTheme];

      // Save theme on change
      themeButton.addEventListener("click", () => {
        currentTheme = (currentTheme + 1) % themes.length;
        document.body.className = themes[currentTheme];
        localStorage.setItem("lab_page_theme", currentTheme); // Save the selected theme
      });
    </script>
    <script src="js/common.js"></script>
    <script src="js/subscriber.js"></script>
    <script src="js/translations.js"></script>
    <script>
      translate_text();
    </script>
  </body>
</html>
