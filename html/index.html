<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title id="title">Live Audio Stream</title>
    <!-- Material Design Lite -->
    <script src="js/material.min.js"></script>
    <link rel="stylesheet" href="css/material.min.css" />
    <!-- Material Design icon font -->
    <link rel="stylesheet" href="font/font.css" />
    <link href="css/subscriber.css" rel="stylesheet" />
  </head>

  <body class="default">
    <div id="galleryModal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeGallery()">&times;</span>
        <div class="gallery">
          <!-- Gallery items will be dynamically inserted here -->
        </div>
      </div>
    </div>

    <div class="menu-buttons">
      <button
        class="hidden team-button mdl-button mdl-js-button mdl-button--icon mdl-button--icon noselect"
        onclick="openGallery()"
      >
        <i class="material-icons">interpreter_mode</i>
      </button>
      <button
        class="theme-button mdl-button mdl-js-button mdl-button--icon mdl-button--icon noselect"
        id="themeButton"
      >
        <i class="material-icons">palette</i>
      </button>
    </div>
    <!-- Wide card with share menu button -->

    <div class="container noselect">
      <h1>Audio Stream</h1>

      <div id="not-supported" class="hidden">
        <p id="unsupported_browser">
          Unfortunately your web browser doesn't appear to support WebRTC which
          is required for this application. Please try another web browser.
        </p>
      </div>
      <div id="output" class="hidden">
        <div id="media"></div>
      </div>
      <div id="supported">
        <div id="channels" class="hidden">
          <!-- <h1 id="channels_header">Channels</h3> -->
          <p id="channels_description">
            Click on a channel name below to connect.
          </p>
          <p id="nochannels"><i>No Channels found</i></p>
          <div>
            <!-- <button class="button">
              <i class="material-icons">record_voice_over</i> Translation
            </button>
            <button class="button">
              <i class="material-icons">translate</i>Live Original
            </button> -->
          </div>
        </div>
      </div>
      <!-- Spinner and Play button -->
      <div
        id="spinner"
        style="width: max(80vw, 100%)"
        class="mdl-progress mdl-js-progress mdl-progress__indeterminate"
      ></div>
      <div style="display: flex; justify-content: center">
        <button
          id="play"
          class="play-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect hidden"
        >
          <i class="material-icons">play_arrow</i>
        </button>
      </div>
      <div id="errors" class="hidden"></div>
      <div id="message-log-container" class="hidden">
        <div id="message-log"></div>
      </div>
      <div id="footer">
        <p
          style="
            position: relative;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
          "
        >
          <span id="powered_by">Powered by</span>
          <a href="https://github.com/porjo/babelcast">Babelcast</a>
        </p>
      </div>
    </div>
    <div id="block_buttons_layer" class="hidden"></div>

    <script src="js/common.js"></script>
    <script src="js/subscriber.js"></script>
    <script src="js/utils.js"></script>
    <script src="teamData.js"></script>
    <script>
      translate_text();
      const themeButton = document.getElementById("themeButton");
      const themes = ["white", "default", "dark", "blue", "green"];

      // Load saved theme on page load
      let currentTheme = localStorage.getItem("lab_page_theme") || 0;
      document.body.className = themes[currentTheme];

      // Save theme on change
      themeButton.addEventListener("click", () => {
        currentTheme = (currentTheme + 1) % themes.length;
        document.body.className = themes[currentTheme];
        localStorage.setItem("lab_page_theme", currentTheme); // Save the selected theme
      });
    </script>
  </body>
</html>
